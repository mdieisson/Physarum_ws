global_costmap:
  global_frame: map
  robot_base_frame: base_footprint

  update_frequency: 10.0           # atualiza costmap global 5 Hz
  publish_frequency: 10.0           # publica no RViz a 2 Hz (mais leve)
  transform_tolerance: 0.5

  plugins:
    - {name: static_layer, type: "costmap_2d::StaticLayer"}
    - {name: obstacle_layer, type: "costmap_2d::ObstacleLayer"}
    - {name: inflation_layer, type: "costmap_2d::InflationLayer"}


  static_layer:
    enabled: true
    map_topic: /map
    subscribe_to_updates: true

  obstacle_layer:
    enabled: true
    observation_sources: laser_scan_sensor
    laser_scan_sensor:
      topic: base_scan
      sensor_frame: base_laser_link
      data_type: LaserScan
      marking: true
      clearing: true
      obstacle_range: 6.0
      raytrace_range: 8.0
      observation_persistence: 0.05
      track_unknown_space: true  # limpa obstáculos dinâmicos rapidamente

  inflation_layer:
    enabled: true
    inflation_radius: 0.6          # zona extra para evitar sobreposição de robôs
    cost_scaling_factor: 2.0

# global_costmap:
#   global_frame: map
#   robot_base_frame: base_footprint
#   update_frequency: 5.0          # Atualizações rápidas (5 Hz)
#   publish_frequency: 2.0         # Frequência de publicação (2 Hz)
#   transform_tolerance: 0.5       # Aceita até 0.5s de latência nos frames
#   resolution: 0.05               # Resolução (5 cm) para precisão em corredores

#   # Tamanho do mapa global (ajuste conforme ambiente)
#   width: 50.0
#   height: 50.0

#   # Footprint (considerando carga)
#   footprint: [[-1.50, -0.20], [-1.50, 0.20], [0.25, 0.20], [0.25, -0.20]]

#   plugins:
#     - {name: static_layer,   type: "costmap_2d::StaticLayer"}     # Mapa base (ocupação estática)
#     - {name: obstacle_layer, type: "costmap_2d::ObstacleLayer"}   # Obstáculos detectados por sensores
#     - {name: inflation_layer,type: "costmap_2d::InflationLayer"}  # Expansão para margens de segurança
#   static_layer:
#     enabled: true
#     map_topic: /map
#     subscribe_to_updates: true
#   obstacle_layer:
#     enabled: true
#     observation_sources: scan
#     scan:
#       sensor_frame: base_laser_link
#       data_type: LaserScan
#       topic: base_scan
#       marking: true
#       clearing: true
#       obstacle_range: 3.5         # Detecta obstáculos até 3.5 m
#       raytrace_range: 4.0         # Limpa área livre até 4 m

#   inflation_layer:
#     enabled: true
#     inflation_radius: 0.8         # Zona de segurança ao redor do robô (0.8 m)
#     cost_scaling_factor: 2.5 